<div class="register-container">
  <mat-card class="register-card">
    <div class="icon-container">
      <img src="assets/ulibre.png" alt="Logo" class="register-logo" />
    </div>
    <mat-card-title class="title">Registro de Usuario</mat-card-title>
    <mat-card-content>
      <mat-horizontal-stepper linear #stepper>
        <!-- Paso 1: Información Personal -->
        <mat-step [stepControl]="personalFormGroup">
          <form [formGroup]="personalFormGroup">
            <h3>Información Personal</h3>
            <div class="form-row">
              <!-- Tipo de Identificación -->
              <mat-form-field appearance="fill" class="form-item">
                <mat-label>Tipo de Identificación</mat-label>
                <mat-select formControlName="identificacionId" required>
                  <mat-option *ngFor="let item of opcionesIdentificacion" [value]="item.id">
                    {{ item.valor }}
                  </mat-option>
                </mat-select>
              </mat-form-field>

              <!-- Número de Identificación -->
              <mat-form-field appearance="fill" class="form-item">
                <mat-label>Número de Identificación</mat-label>
                <input matInput placeholder="Número de identificación" formControlName="numeroIdentificacion" required />
              </mat-form-field>
            </div>

            <div class="form-row">
              <!-- Nombre Completo -->
              <mat-form-field appearance="fill" class="form-item">
                <mat-label>Nombre Completo</mat-label>
                <input matInput placeholder="Ingresa tu nombre completo" formControlName="nombres" required />
              </mat-form-field>

              <!-- Correo Electrónico -->
              <mat-form-field appearance="fill" class="form-item">
                <mat-label>Correo Electrónico</mat-label>
                <input matInput type="email" placeholder="Ingresa tu correo" formControlName="correo" required />
              </mat-form-field>
            </div>

            <div class="form-row">
              <!-- Contraseña -->
              <mat-form-field appearance="fill" class="form-item">
                <mat-label>Contraseña</mat-label>
                <input matInput type="password" placeholder="Crea una contraseña" formControlName="password" required />
              </mat-form-field>

              <!-- Teléfono -->
              <mat-form-field appearance="fill" class="form-item">
                <mat-label>Teléfono</mat-label>
                <input matInput placeholder="Ingresa tu teléfono" formControlName="telefono" required />
              </mat-form-field>
            </div>

            <div class="button-row">
              <button mat-raised-button color="primary" (click)="stepper.next()">Siguiente</button>
            </div>
          </form>
        </mat-step>

        <!-- Paso 2: Dirección -->
        <mat-step [stepControl]="addressFormGroup">
          <form [formGroup]="addressFormGroup">
            <h3>Dirección</h3>
            <div class="form-row">
              <!-- Dirección -->
              <mat-form-field appearance="fill" class="form-item">
                <mat-label>Dirección</mat-label>
                <input matInput placeholder="Ingresa tu dirección" formControlName="direccion" required />
              </mat-form-field>

              <!-- País -->
              <mat-form-field appearance="fill" class="form-item">
                <mat-label>País</mat-label>
                <mat-select formControlName="pais" (selectionChange)="onPaisChange($event.value)" required>
                  <mat-option *ngFor="let item of opcionesPaises" [value]="item.id">{{ item.nombre }}</mat-option>
                </mat-select>
              </mat-form-field>
            </div>

            <div class="form-row">
              <!-- Departamento -->
              <mat-form-field appearance="fill" class="form-item">
                <mat-label>Departamento</mat-label>
                <mat-select formControlName="departamento" (selectionChange)="onDepartamentoChange($event.value)" required>
                  <mat-option *ngFor="let item of opcionesDepartamentos" [value]="item.id">{{ item.nombre }}</mat-option>
                </mat-select>
              </mat-form-field>

              <!-- Ciudad -->
              <mat-form-field appearance="fill" class="form-item">
                <mat-label>Ciudad</mat-label>
                <mat-select formControlName="ciudadResidenciaId" (selectionChange)="onCiudadChange($event.value)" required>
                  <mat-option *ngFor="let item of opcionesCiudades" [value]="item.id">{{ item.nombre }}</mat-option>
                </mat-select>
              </mat-form-field>
            </div>

            <div class="button-row">
              <button mat-raised-button color="accent" (click)="stepper.previous()">Anterior</button>
              <button mat-raised-button color="primary" (click)="stepper.next()">Siguiente</button>
            </div>
          </form>
        </mat-step>

        <!-- Paso 3: Información Adicional -->
        <mat-step [stepControl]="additionalFormGroup">
          <form [formGroup]="additionalFormGroup" (ngSubmit)="onRegister()">
            <h3>Información Adicional</h3>
            <div class="form-row">
              <!-- Sede -->
              <mat-form-field appearance="fill" class="form-item">
                <mat-label>Sede</mat-label>
                <mat-select formControlName="sedeId" required>
                  <mat-option *ngFor="let item of opcionesSedes" [value]="item.id">
                    {{ item.nombre }}
                  </mat-option>
                </mat-select>
              </mat-form-field>

              <!-- Profesión -->
              <mat-form-field appearance="fill" class="form-item">
                <mat-label>Profesión</mat-label>
                <mat-select formControlName="profesionId" required>
                  <mat-option *ngFor="let item of opcionesProfesion" [value]="item.id">
                    {{ item.valor }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>

            <div class="form-row">
              <!-- Tipo de Trabajo -->
              <mat-form-field appearance="fill" class="form-item">
                <mat-label>Tipo de Trabajo</mat-label>
                <mat-select formControlName="tipoTrabajoId" required>
                  <mat-option *ngFor="let item of opcionesTipoTrabajo" [value]="item.id">
                    {{ item.valor }}
                  </mat-option>
                </mat-select>
              </mat-form-field>

              <!-- Estado Civil -->
              <mat-form-field appearance="fill" class="form-item">
                <mat-label>Estado Civil</mat-label>
                <mat-select formControlName="estadoCivilId" required>
                  <mat-option *ngFor="let item of opcionesEstadoCivil" [value]="item.id">
                    {{ item.valor }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>

            <div class="form-row">
              <!-- Nivel Educativo -->
              <mat-form-field appearance="fill" class="form-item">
                <mat-label>Nivel Educativo</mat-label>
                <mat-select formControlName="nivelEducativoId" required>
                  <mat-option *ngFor="let item of opcionesNivelEducativo" [value]="item.id">
                    {{ item.valor }}
                  </mat-option>
                </mat-select>
              </mat-form-field>

              <!-- Género -->
              <mat-form-field appearance="fill" class="form-item">
                <mat-label>Género</mat-label>
                <mat-select formControlName="generoId" required>
                  <mat-option *ngFor="let item of opcionesGenero" [value]="item.id">
                    {{ item.valor }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>

            <div class="form-row">
              <!-- Ingresos -->
              <mat-form-field appearance="fill" class="form-item">
                <mat-label>Ingresos</mat-label>
                <input matInput type="number" placeholder="Ingresos mensuales" formControlName="ingresos" required />
              </mat-form-field>

              <!-- Egresos -->
              <mat-form-field appearance="fill" class="form-item">
                <mat-label>Egresos</mat-label>
                <input matInput type="number" placeholder="Egresos mensuales" formControlName="egresos" required />
              </mat-form-field>
            </div>

            <input type="hidden" formControlName="habilitado" />

            <div class="button-row">
              <button mat-raised-button color="accent" (click)="stepper.previous()">Anterior</button>
              <button mat-raised-button color="primary" type="submit">Registrar</button>
            </div>
          </form>
        </mat-step>
      </mat-horizontal-stepper>
    </mat-card-content>
  </mat-card>
</div>